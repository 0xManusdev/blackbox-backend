// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client"
    output   = "../node_modules/.prisma/client"
}

datasource db {
    provider = "postgresql"
}

// Predefined airport zones
enum Zone {
    TERMINAL_1
    TERMINAL_2
    PORTES_EMBARQUEMENT
    ZONE_DOUANES
    PARKING
    HALL_ARRIVEE
    HALL_DEPART
    ZONE_TRANSIT
    AUTRE
}

model Report {
    id                Int      @id @default(autoincrement())
    
    // Form fields
    zone              Zone
    customZone        String?  @map("custom_zone") // For "AUTRE" option
    incidentTime      String   @map("incident_time") @db.VarChar(10) // "HH:MM" format
    description       String   // Original description from form
    
    // AI processed fields
    anonymizedContent String   @map("anonymized_content")
    category          String   @db.VarChar(100)
    severity          String   @db.VarChar(50)
    aiAnalysis        String   @map("ai_analysis")
    
    // Blockchain proof
    contentHash       String   @map("content_hash") @db.VarChar(66)
    blockchainTxHash  String   @map("blockchain_tx_hash") @db.VarChar(66)
    
    // Attachments (stored as Supabase URLs)
    attachments       String[] @default([])
    
    createdAt         DateTime @default(now()) @map("created_at")

    @@map("reports")
}
